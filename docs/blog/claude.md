# claude

在8月份体验了一个月的claude，发现这比现有的ai都要聪明太多，记录下使用技巧。

---

## 自定义kiro用于辅助开发

- 添加./claude/commands/kiro

Kiro 通过 spec → design → task → execute → vibe 的分层指令体系，把用户的模糊想法转化为结构化的实施计划，再指导单个任务执行。

需求、设计、任务的文档存放在 `.kiro/specs/{feature_name}/`

### spec.md：规格总体工作流

- 作用：把“粗略想法”迭代成需求、设计、任务。

### design.md：功能设计文档生成

- 作用：在需求确认后创建 `.kiro/specs/{feature_name}/design.md`，融合必要研究形成可落地的技术方案。

### task.md：实现任务清单

- 作用：根据设计拆出编码任务，生成 `.kiro/specs/{feature_name}/tasks.md`。
- 注意：若发现需求或设计缺口，必须退回上一阶段补全。

### execute.md：单任务执行指导

- 作用：指导如何从已批准的规格中挑选任务执行。进入任何任务前必须阅读对应的 requirements/design/tasks。
- 原则：一次只执行一个任务；存在子任务先完成子任务；完成后停下等待用户复查。

### vibe.md：日常交互

---

## 默认的CLAUDE.md

- 在./claude/CLAUDE.md下添加，作为默认的提示词

```markdown
# 任何项目都务必遵守的规则（极其重要！！！）

## Communication

- 永远使用简体中文进行思考和对话

## Documentation

- 编写 .md 文档时，也要用中文
- 正式文档写到项目的 docs/ 目录下
- 用于讨论和评审的计划、方案等文档，写到项目的 discuss/ 目录下

## Code Architecture

- 编写代码的硬性指标，包括以下原则：
  （1）对于 Python、JavaScript、TypeScript 等动态语言，尽可能确保每个代码文件不要超过 300 行
  （2）对于 Java、Go、Rust 等静态语言，尽可能确保每个代码文件不要超过 400 行
  （3）每层文件夹中的文件，尽可能不超过 8 个。如有超过，需要规划为多层子文件夹
- 除了硬性指标以外，还需要时刻关注优雅的架构设计，避免出现以下可能侵蚀我们代码质量的「坏味道」：
  （1）僵化 (Rigidity): 系统难以变更，任何微小的改动都会引发一连串的连锁修改。
  （2）冗余 (Redundancy): 同样的代码逻辑在多处重复出现，导致维护困难且容易产生不一致。
  （3）循环依赖 (Circular Dependency): 两个或多个模块互相纠缠，形成无法解耦的“死结”，导致难以测试与复用。
  （4）脆弱性 (Fragility): 对代码一处的修改，导致了系统中其他看似无关部分功能的意外损坏。
  （5）晦涩性 (Obscurity): 代码意图不明，结构混乱，导致阅读者难以理解其功能和设计。
  （6）数据泥团 (Data Clump): 多个数据项总是一起出现在不同方法的参数中，暗示着它们应该被组合成一个独立的对象。
  （7）不必要的复杂性 (Needless Complexity): 用“杀牛刀”去解决“杀鸡”的问题，过度设计使系统变得臃肿且难以理解。
- 【非常重要！！】无论是你自己编写代码，还是阅读或审核他人代码时，都要严格遵守上述硬性指标，以及时刻关注优雅的架构设计。
- 【非常重要！！】无论何时，一旦你识别出那些可能侵蚀我们代码质量的「坏味道」，都应当立即询问用户是否需要优化，并给出合理的优化建议。

## Run & Debug

- 必须首先在项目的 scripts/ 目录下，维护好 Run & Debug 需要用到的全部 .sh 脚本
- 对于所有 Run & Debug 操作，一律使用 scripts/ 目录下的 .sh 脚本进行启停。永远不要直接使用 npm、pnpm、uv、python 等等命令
- 如果 .sh 脚本执行失败，无论是 .sh 本身的问题还是其他代码问题，需要先紧急修复。然后仍然坚持用 .sh 脚本进行启停
- Run & Debug 之前，为所有项目配置 Logger with File Output，并统一输出到 logs/ 目录下
```
